<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sidereal Time Map</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  
  
  
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
    }
    h1 {
      text-align: center;
      margin: 1em 0 0.5em;
    }
    #map {
      height: 60vh;
      width: 100%;
    }
    #info {
      padding: 1em;
      background: #f0f0f0;
      text-align: center;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1em;
    }
    .block {
      background: white;
      border-radius: 12px;
      padding: 1em;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      font-size: 1.1em;
    }
    .label {
      font-weight: normal;
      font-size: 0.95em;
      color: #555;
    }
    .value {
      font-weight: bold;
      font-size: 1.3em;
      color: #222;
    }

/* Dark Mode styles */
.dark-mode {
  background-color: #121212;
  color: #eee;
}

.dark-mode .block {
  background: #1e1e1e;
}

.dark-mode .value {
  background: #2c2c2c;
}

    .toggle-darkmode {
      margin-top: 1em;
    }
    details {
      margin-top: 2em;
      background: #ddd;
      padding: 1em;
      border-radius: 8px;
      width: 90%;
      max-width: 600px;
    }
    .dark-mode details {
      background: #333;
    }
  </style>
</head>
<body>
  <h1>Sidereal Time Explorer</h1>

 </div>
  <div id="map"></div>
  <div id="info">
    <div class="block"><div class="label">Latitude</div><div class="value" id="lat">-</div></div>
    <div class="block"><div class="label">Longitude</div><div class="value" id="lon">-</div></div>
    <div class="block"><div class="label">UTC Time</div><div class="value" id="utcTime">-</div></div>
    <div class="block"><div class="label">Local Solar Time <span id="tzOffset"></span></div><div class="value" id="localTime">-</div></div>
    <div class="block"><div class="label">Local Sidereal Time</div><div class="value" id="lst">-</div></div>
  </div>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    
    const map = L.map('map').setView([20, 0], 2);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // Define an array of telescope observatories
    const observatories = [
  { name: "Mauna Kea Observatories", lat: 19.8206, lon: -155.4681 },
  { name: "Subaru Telescope", lat: 19.8250, lon: -155.4750 },
  { name: "Keck Observatory", lat: 19.8283, lon: -155.4783 },
  { name: "Gemini North", lat: 19.8238, lon: -155.4691 },
  { name: "Paranal Observatory (VLT)", lat: -24.6252, lon: -70.4025 },
  { name: "La Silla Observatory", lat: -29.2581, lon: -70.7346 },
  { name: "Las Campanas Observatory (LCO)", lat: -29.0150, lon: -70.6925 },
  { name: "Cerro Tololo Inter-American Observatory", lat: -30.1690, lon: -70.8040 },
  { name: "ALMA (Atacama)", lat: -23.0292, lon: -67.7550 },
  { name: "Roque de los Muchachos", lat: 28.7540, lon: -17.8900 },
  { name: "Teide Observatory", lat: 28.3000, lon: -16.5100 },
  { name: "Mount Wilson Observatory", lat: 34.2244, lon: -118.0575 },
  { name: "Palomar Observatory", lat: 33.3563, lon: -116.8648 },
  { name: "Very Large Array (VLA)", lat: 34.0784, lon: -107.6184 },
  { name: "Apache Point Observatory", lat: 32.7804, lon: -105.8203 },
  { name: "Kitt Peak National Observatory", lat: 31.9583, lon: -111.5986 },
  { name: "Lowell Observatory", lat: 35.2013, lon: -111.6645 },
  { name: "South African Astronomical Observatory", lat: -32.3794, lon: 20.8106 },
  { name: "Siding Spring Observatory", lat: -31.2720, lon: 149.0700 },
  { name: "ARIES (Manora Peak)", lat: 29.3649, lon: 79.4586 },
  { name: "Devasthal Observatory", lat: 29.3600, lon: 79.6900 },
  { name: "GMRT (Giant Metrewave Radio Telescope)", lat: 19.0967, lon: 74.0500 },
  { name: "Himalayan Chandra Telescope (Hanle)", lat: 32.7798, lon: 78.9648 },
  { name: "Yunnan Observatory (Kunming)", lat: 25.0268, lon: 102.7930 },
  { name: "Lijiang Observatory", lat: 26.6940, lon: 100.0300 },
  { name: "Crimean Astrophysical Observatory", lat: 44.7265, lon: 34.0102 },
  { name: "Greenwich Observatory", lat: 51.4769, lon: 0.0005 },
  { name: "Jodrell Bank Observatory", lat: 53.2363, lon: -2.3070 },
  { name: "Arecibo Observatory (Historic)", lat: 18.3442, lon: -66.7528 },
  { name: "Vainu Bappu Observatory (Kavalur)", lat: 12.5766, lon: 78.8317 },
  { name: "International Liquid Mirror Telescope (ILMT)", lat: 29.3609, lon: 79.6844 },
  { name: "IUCAA Girawali Observatory", lat: 19.0729, lon: 73.8447 },
  { name: "Large Binocular Telescope Observatory", lat: 32.7013, lon: -109.8891 },
  { name: "Lick Observatory", lat: 37.3414, lon: -121.6429 },
  { name: "McDonald Observatory", lat: 30.6717, lon: -104.0226 },
  { name: "Haleakala Observatory", lat: 20.7081, lon: -156.2567 },
  { name: "Calar Alto Observatory", lat: 37.2236, lon: -2.5463 },
  { name: "Big Bear Solar Observatory", lat: 34.2633, lon: -116.9114 },
  { name: "Griffith Observatory", lat: 34.1184, lon: -118.3004 },
  { name: "Fabra Observatory", lat: 41.4181, lon: 2.1239 },
  { name: "Sydney Observatory", lat: -33.8593, lon: 151.2046 },
  { name: "Jantar Mantar (New Delhi)", lat: 28.6270, lon: 77.2166 }
];

    // Loop through the observatory list and place a marker
    observatories.forEach(obs => {
      const telescopeIcon = L.divIcon({
      html: '<span style="font-size:2.2em;line-height:1;">ðŸ”­</span>',
      className: '',
      iconSize: [40, 40],
      iconAnchor: [20, 20]
      });
      const marker = L.marker([obs.lat, obs.lon], { icon: telescopeIcon }).addTo(map);
      marker.bindPopup(`<b>${obs.name}</b>`);
    });

    let currentLon = 0;
    let latDisplay = document.getElementById('lat');
    let lonDisplay = document.getElementById('lon');
    let utcDisplay = document.getElementById('utcTime');
    let localDisplay = document.getElementById('localTime');
    let tzDisplay = document.getElementById('tzOffset');
    let lstDisplay = document.getElementById('lst');

    function calculateLST(date, longitude) {
      const JD = (date.getTime() / 86400000) + 2440587.5;
      const D = JD - 2451545.0;
      let GMST = 280.46061837 + 360.98564736629 * D;
      GMST = ((GMST % 360) + 360) % 360;
      const LST = (GMST + longitude) % 360;
      const hours = Math.floor(LST / 15);
      const minutes = Math.floor((LST / 15 - hours) * 60);
      const seconds = Math.floor((((LST / 15 - hours) * 60) - minutes) * 60);
      return `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
    }

    function getLocalTimeFromLon(date, lon) {
      const utc = date.getTime() + date.getTimezoneOffset() * 60000;
      const offsetMs = lon * 4 * 60 * 1000;
      const localDate = new Date(utc + offsetMs);
      return localDate.toTimeString().split(' ')[0];
    }

    function getTZOffsetFromLon(lon) {
      const offset = lon / 15;
      const sign = offset >= 0 ? '+' : '-';
      const absOffset = Math.abs(offset);
      const hrs = Math.floor(absOffset);
      const mins = Math.round((absOffset - hrs) * 60);
      return `UTC${sign}${hrs}:${mins.toString().padStart(2, '0')}`;
    }

    function updateTimeDisplays() {
      const now = new Date();
      utcDisplay.textContent = now.toUTCString().split(' ')[4];
      localDisplay.textContent = getLocalTimeFromLon(now, currentLon);
      lstDisplay.textContent = calculateLST(now, currentLon);
      tzDisplay.textContent = `(${getTZOffsetFromLon(currentLon)})`;
    }

    map.on('click', function(e) {
      const lat = e.latlng.lat.toFixed(4);
      const lon = e.latlng.lng.toFixed(4);
      currentLon = parseFloat(lon);
      latDisplay.textContent = lat;
      lonDisplay.textContent = lon;
      updateTimeDisplays();
    });

    // Live updating clock every second
    setInterval(() => {
      if (!isNaN(currentLon)) {
        updateTimeDisplays();
      }
    }, 1000);
  </script>
</body>
</html>
